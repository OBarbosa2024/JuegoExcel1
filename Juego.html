<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Trivial: Revela la Imagen</title>
    <style>
        /* --- Fuentes y Estilos Base --- */
        @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap');

        :root {
            --color-primario: #4a148c; /* Morado oscuro */
            --color-secundario: #8e24aa; /* Morado más claro */
            --color-fondo: #121212; /* Fondo oscuro */
            --color-texto: #ffffff;
            --color-correcto: #28a745; /* Verde */
            --color-incorrecto: #dc3545; /* Rojo */
            --color-neutro: #455a64; /* Gris azulado */
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Poppins', sans-serif;
            background-color: var(--color-fondo);
            color: var(--color-texto);
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        /* --- Contenedor Principal del Juego --- */
        .game-container {
            width: 100%;
            max-width: 900px;
            aspect-ratio: 16 / 9;
            position: relative;
            background-image: url('https://i.postimg.cc/p9zw0pgh/fondo-juego.jpg');
            background-size: cover;
            background-position: center;
            border-radius: 15px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            overflow: hidden; /* Asegura que la rejilla no se salga */
        }
        
        /* --- Rejilla que cubre la imagen --- */
        .grid-overlay {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            grid-template-rows: repeat(2, 1fr);
            gap: 4px;
            background-color: rgba(18, 18, 18, 0.4);
        }

        .grid-block {
            background: linear-gradient(45deg, var(--color-primario), var(--color-secundario));
            transition: opacity 0.7s ease-in-out, transform 0.5s ease;
        }

        .grid-block.hidden {
            opacity: 0;
            transform: scale(0.5);
            pointer-events: none;
        }
        
        /* --- Contenedor del Quiz (Preguntas y Respuestas) --- */
        .quiz-container {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 90%;
            max-width: 500px;
            background-color: rgba(0, 0, 0, 0.8);
            backdrop-filter: blur(8px);
            border-radius: 12px;
            padding: 30px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.3);
            text-align: center;
        }
        
        #question-container {
            margin-bottom: 25px;
        }
        
        #question-text {
            font-size: 1.4rem;
            font-weight: 600;
            margin-bottom: 20px;
        }
        
        /* --- Temporizador --- */
        #timer-container {
            position: absolute;
            top: -25px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--color-neutro);
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 1.5rem;
            font-weight: 600;
            border: 3px solid var(--color-fondo);
            transition: background-color 0.3s;
        }

        /* --- Botones de Respuesta --- */
        .btn-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
        }

        .btn {
            background-color: var(--color-neutro);
            color: var(--color-texto);
            border: none;
            border-radius: 8px;
            padding: 12px;
            font-size: 1rem;
            font-weight: 400;
            cursor: pointer;
            transition: transform 0.2s ease, background-color 0.2s ease;
        }

        .btn:hover:not(:disabled) {
            transform: translateY(-3px);
            background-color: var(--color-secundario);
        }

        .btn:disabled {
            cursor: not-allowed;
            opacity: 0.7;
        }
        
        .btn.correct {
            background-color: var(--color-correcto);
        }

        .btn.incorrect {
            background-color: var(--color-incorrecto);
        }

        /* --- Controles (Botón Siguiente) --- */
        .controls {
            margin-top: 20px;
            display: flex;
            justify-content: center;
        }
        
        #next-btn {
            background-color: var(--color-secundario);
            padding: 10px 30px;
        }
        
        #next-btn:hover {
             background-color: var(--color-primario);
        }

        .hide {
            display: none;
        }
        
        /* --- Pantalla Final --- */
        #final-screen h1{
            font-size: 2.5rem;
            color: var(--color-texto);
            margin-bottom: 10px;
        }
         #final-screen p{
            font-size: 1.2rem;
            margin-bottom: 20px;
        }
    </style>
</head>
<body>

    <div class="game-container">
        <div class="grid-overlay">
            <div class="grid-block"></div>
            <div class="grid-block"></div>
            <div class="grid-block"></div>
            <div class="grid-block"></div>
            <div class="grid-block"></div>
            <div class="grid-block"></div>
            <div class="grid-block"></div>
            <div class="grid-block"></div>
            <div class="grid-block"></div>
            <div class="grid-block"></div>
        </div>

        <div class="quiz-container">
            <div id="start-screen">
                <h1>Trivial de Conocimientos</h1>
                <p>Responde correctamente para revelar la imagen oculta. ¡Tienes 10 segundos por pregunta!</p>
                <button class="btn" id="start-btn">Comenzar</button>
            </div>

            <div id="game-screen" class="hide">
                <div id="timer-container">
                    <div id="timer">10</div>
                </div>
                <div id="question-container">
                    <h2 id="question-text">Aquí va la pregunta</h2>
                </div>
                <div id="answer-buttons" class="btn-grid">
                    </div>
                <div class="controls">
                    <button id="next-btn" class="btn hide">Siguiente</button>
                </div>
            </div>
            
            <div id="final-screen" class="hide">
                <h1>Juego Terminado</h1>
                <p id="score-text">Tu puntuación es...</p>
                <button class="btn" id="restart-btn">Jugar de Nuevo</button>
            </div>
        </div>
    </div>

    <script>
        // --- Referencias a los elementos del DOM ---
        const startScreen = document.getElementById('start-screen');
        const gameScreen = document.getElementById('game-screen');
        const finalScreen = document.getElementById('final-screen');
        
        const startBtn = document.getElementById('start-btn');
        const restartBtn = document.getElementById('restart-btn');

        const questionContainerElement = document.getElementById('question-container');
        const questionElement = document.getElementById('question-text');
        const answerButtonsElement = document.getElementById('answer-buttons');
        const nextButton = document.getElementById('next-btn');
        
        const timerElement = document.getElementById('timer');
        const timerContainer = document.getElementById('timer-container');
        const scoreText = document.getElementById('score-text');

        const gridBlocks = document.querySelectorAll('.grid-block');

        // --- Variables del estado del juego ---
        let shuffledQuestions, currentQuestionIndex;
        let score = 0;
        let timerInterval;
        let timeLeft = 10;

        // --- Preguntas del Trivial ---
        const questions = [
            {
                question: '¿En qué hoja de cálculo de Microsoft se utilizan fórmulas y funciones?',
                answers: [
                    { text: 'Word', correct: false },
                    { text: 'Excel', correct: true },
                    { text: 'PowerPoint', correct: false },
                    { text: 'Access', correct: false }
                ]
            },
            {
                question: '¿Cuál es la función en Excel para sumar un rango de celdas?',
                answers: [
                    { text: 'PROMEDIO', correct: false },
                    { text: 'CONTAR', correct: false },
                    { text: 'SUMA', correct: true },
                    { text: 'MAX', correct: false }
                ]
            },
            {
                question: '¿Qué planeta es conocido como el "Planeta Rojo"?',
                answers: [
                    { text: 'Júpiter', correct: false },
                    { text: 'Marte', correct: true },
                    { text: 'Venus', correct: false },
                    { text: 'Saturno', correct: false }
                ]
            },
            {
                question: '¿Quién pintó la "Mona Lisa"?',
                answers: [
                    { text: 'Vincent van Gogh', correct: false },
                    { text: 'Pablo Picasso', correct: false },
                    { text: 'Miguel Ángel', correct: false },
                    { text: 'Leonardo da Vinci', correct: true }
                ]
            },
            {
                question: '¿Cuál es la capital de Japón?',
                answers: [
                    { text: 'Pekín', correct: false },
                    { text: 'Seúl', correct: false },
                    { text: 'Tokio', correct: true },
                    { text: 'Bangkok', correct: false }
                ]
            },
            {
                question: '¿Cuál es el océano más grande del mundo?',
                answers: [
                    { text: 'Atlántico', correct: false },
                    { text: 'Índico', correct: false },
                    { text: 'Ártico', correct: false },
                    { text: 'Pacífico', correct: true }
                ]
            },
            {
                question: '¿Qué gas es esencial para la respiración humana?',
                answers: [
                    { text: 'Nitrógeno', correct: false },
                    { text: 'Oxígeno', correct: true },
                    { text: 'Dióxido de Carbono', correct: false },
                    { text: 'Hidrógeno', correct: false }
                ]
            },
            {
                question: '¿En qué año llegó el hombre a la Luna por primera vez?',
                answers: [
                    { text: '1969', correct: true },
                    { text: '1972', correct: false },
                    { text: '1965', correct: false },
                    { text: '1981', correct: false }
                ]
            },
            {
                question: '¿Cuál es el resultado de 15 + 5 * 2?',
                answers: [
                    { text: '40', correct: false },
                    { text: '25', correct: true },
                    { text: '35', correct: false },
                    { text: '20', correct: false }
                ]
            },
            {
                question: '¿Cuál es el animal terrestre más rápido?',
                answers: [
                    { text: 'León', correct: false },
                    { text: 'Tigre', correct: false },
                    { text: 'Leopardo', correct: false },
                    { text: 'Guepardo', correct: true }
                ]
            }
        ];

        // --- Event Listeners ---
        startBtn.addEventListener('click', startGame);
        nextButton.addEventListener('click', () => {
            currentQuestionIndex++;
            setNextQuestion();
        });
        restartBtn.addEventListener('click', startGame);

        // --- Funciones del Juego ---

        function startGame() {
            startScreen.classList.add('hide');
            finalScreen.classList.add('hide');
            gameScreen.classList.remove('hide');

            // Resetear la rejilla
            gridBlocks.forEach(block => block.classList.remove('hidden'));

            shuffledQuestions = questions.sort(() => Math.random() - 0.5);
            currentQuestionIndex = 0;
            score = 0;
            setNextQuestion();
        }

        function setNextQuestion() {
            resetState();
            if (currentQuestionIndex < shuffledQuestions.length) {
                showQuestion(shuffledQuestions[currentQuestionIndex]);
                startTimer();
            } else {
                endGame();
            }
        }

        function showQuestion(question) {
            questionElement.innerText = question.question;
            question.answers.forEach(answer => {
                const button = document.createElement('button');
                button.innerText = answer.text;
                button.classList.add('btn');
                if (answer.correct) {
                    button.dataset.correct = answer.correct;
                }
                button.addEventListener('click', selectAnswer);
                answerButtonsElement.appendChild(button);
            });
        }

        function resetState() {
            clearInterval(timerInterval);
            timeLeft = 10;
            timerElement.innerText = timeLeft;
            timerContainer.style.backgroundColor = 'var(--color-neutro)';

            nextButton.classList.add('hide');
            while (answerButtonsElement.firstChild) {
                answerButtonsElement.removeChild(answerButtonsElement.firstChild);
            }
        }
        
        function startTimer() {
            timerInterval = setInterval(() => {
                timeLeft--;
                timerElement.innerText = timeLeft;
                if (timeLeft <= 3) {
                    timerContainer.style.backgroundColor = 'var(--color-incorrecto)';
                }
                if (timeLeft <= 0) {
                    clearInterval(timerInterval);
                    handleTimeout();
                }
            }, 1000);
        }

        function handleTimeout() {
            // Marcar todas las respuestas como incorrectas y mostrar la correcta
            Array.from(answerButtonsElement.children).forEach(button => {
                button.disabled = true;
                if (button.dataset.correct) {
                    setStatusClass(button, true);
                }
            });
            nextButton.classList.remove('hide');
        }

        function selectAnswer(e) {
            clearInterval(timerInterval);
            const selectedButton = e.target;
            const correct = selectedButton.dataset.correct === 'true';

            if (correct) {
                score++;
                removeGridBlock();
            }
            
            setStatusClass(selectedButton, correct);
            Array.from(answerButtonsElement.children).forEach(button => {
                button.disabled = true; // Deshabilitar todos los botones
                if (button.dataset.correct) {
                    setStatusClass(button, true);
                }
            });
            
            if (shuffledQuestions.length > currentQuestionIndex + 1) {
                nextButton.classList.remove('hide');
            } else {
                // Es la última pregunta, mostrar botón de finalizar
                nextButton.innerText = 'Ver Resultados';
                nextButton.classList.remove('hide');
            }
        }

        function setStatusClass(element, correct) {
            if (correct) {
                element.classList.add('correct');
            } else {
                element.classList.add('incorrect');
            }
        }
        
        function removeGridBlock() {
            // Quita un bloque que no esté ya oculto
            const visibleBlock = document.querySelector('.grid-block:not(.hidden)');
            if (visibleBlock) {
                visibleBlock.classList.add('hidden');
            }
        }
        
        function endGame() {
            gameScreen.classList.add('hide');
            finalScreen.classList.remove('hide');
            scoreText.innerText = `Acertaste ${score} de ${questions.length} preguntas.`;
            nextButton.innerText = 'Siguiente'; // Resetear texto del botón
            nextButton.classList.add('hide');
        }

    </script>
</body>
</html>
